---
title: "P8105 Final Project Proposal-Pediatric COVID"
author: "Jerry Chao, Lusha Liang, Sal El-Sadek, Kyung Suk Lee"
date: "`r Sys.Date()`"
output: 
  github_document:
    toc: yes
---

```{r setup,  message = FALSE, warning = FALSE}
library(tidyverse)

knitr::opts_chunk$set(
  fig.width = 6,
  fig.asp = .6,
  out.width = "90%")

theme_set(theme_minimal() + theme(legend.position = "bottom"))

options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis")

scale_colour_discrete = scale_color_viridis_d
scale_fill_discrete = scale_fill_viridis_d

knitr::opts_chunk$set(comment = NA, message = FALSE, warning = FALSE, echo = TRUE)
```

## Introduction

* The group members for our final project includes **Jerry Chao (JYC2171)**, **Lusha Liang (LL3344)**, **Sal El-Sadek (SNE2114)**, and **Kyung Suk Lee (KL3069)**.
* The tentative title for our project is **Pediatric COVID**.
* The private repository called **p8105_final_ped_covid** was created with access to all members of the team as collaborators since we are using dataset which comprises of patient's health information. However, we have de-identified the data in order to remove all personally identifiable information.

## Motivation for this project

There has been a lot of research done concerning COVID-19 in the past year, but not much focus, relatively speaking, is given to how COVID-19 affects children and young adults given the low fatality rate of those age groups. Our goal in this project is to look at the severity of COVID-19 in young people and how various common comorbidities can affect the risk of having a more sever case of COVID-19.

* Article 1: [Hospitalization Rates and Characteristics of Children Aged < 18 years Hospitalized with COVID-19](https://www.cdc.gov/mmwr/volumes/69/wr/mm6932e3.htm#)
* Article 2: [Clinical Characteristics and Outcomes of Hospitalized and Critically Ill Children and Adolescents with COVID-19 at a Tertiary Care Medical Center in NYC](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7212947/)

## Anticipated data sources

```{r}
ped_covid =
  read_csv("./data/p8105_final_ped_covid.csv")

ped_covid %>% 
  head()
```

* Source 1: This is a de-identified dataset of pediatric patients from a tertiary care medical center who tested positive for COVID on SARS-CoV-2 RT PCR test and whether or not they were hospitalized. The age range in the study is **`r ped_covid %>% pull(age) %>% min()`** to **`r ped_covid %>% pull(age) %>% max()`** years of age. An id number for each patient has been randomly generated. There are **`r nrow(ped_covid)`** rows (patients) and **`r ncol(ped_covid)`** columns in this dataset.  The variables included in this dataset are _`r ped_covid %>% names()`_. Some of the important variables are date and time of positive covid test ("eventdatetime"), whether the patient was admitted ("admitted"), whether there was a preceding emergency department visit ("ed_yes_no_0_365_before"), whether the patient needed intensive care admission ("icu_yes_no") and date and time of icu admission ("icu_date_time"), demographic data (age, gender, ethnicity, race, zip code data - predominantly in the Bronx), some past medical history data (bmi data, asthma data, diabetes data) and one vital sign datum (systolic blood pressure). This will set the stage for our discussion and further analyses. We can also request additional data, with a turnaround time of probably upto 1 week.

* Source 2: [NYC Coronavirus Disease 2019 (COVID-19) Data](https://github.com/nychealth/coronavirus-data)

* Source 3: [NYC OpenData](https://data.cityofnewyork.us/Health/COVID-19-Outcomes-by-Testing-Cohorts-Cases-Hospita/cwmx-mvra)


## Intended final products
**Need Description**

## Planned analyses / visualizations / coding challenges

* Analyses: **Need Description**

* Visualizations: We are planning to make various plots (e.g., scatterplot, boxplot, barplot, lineplots) with interactivity using `plot_ly` to provide a platform for online data analytics and visualizations where users can observe information by zooming and hovering. Also, we plan to integrate different plots into dashboard using `shinydashboard` which will make users to understand various information in an easy-to-read format. Density plot shown below is one of the visualization examples. We have generated a density plot of the age distribution in this dataset by admission (yes/no). There appears to be a bimodal age distribution of pediatric patients who tested positive for COVID-19 with more admissions during the first 2.5 years of life and also among older teenagers (15-20 years). There are less patients admitted in the toddler and small child age range (3-10).

```{r}
ped_covid %>% 
  ggplot(aes(x = age, fill = admitted)) +
  geom_density(alpha = .6) +
  labs(
    title = "Age Distribution",
    x = "Age (Years)",
    y = "Density") +
  viridis::scale_color_viridis(discrete = TRUE) +
  theme_minimal() +
  theme(legend.position = "bottom")
```

* Coding challenges: Most of the coding will require extensive data wrangling, such as changing the variables to right format, removing white-spaces, identifying any outliers, dealing with missed values, merging latitude and longitude information for mapping, and tidying the data. Also, since we plan to use `shinydashboard`, integrating all the necessary codes for visualization can be a challenge.

## Planned timeline

We plan to meet once or twice a week (depending on the group member's availability) to discuss project process. The tentative timeline are outlined below.

* By mid November: Finalize gathering more sources of information if needed
* By end of November: Finalize creating all the necessary visualizations
* By early December: Integrate all visualizations into `shinydashboard` and create website
* By Dec 10th: Make modifications based on peer-assessment for the final presentation 

## Word count

```{r}
wordcountaddin::text_stats("proposal.Rmd")
```

